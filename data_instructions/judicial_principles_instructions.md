# 📘 تعليمات التعامل مع مبادئ المحكمة العليا (Judicial Principles)

## التعريف
النوع: مبادئ وقواعد قانونية قررتها المحكمة العليا في سلطنة عُمان.

المصدر: كتب أو مجلدات رسمية من "المكتب الفني" بالمحكمة العليا، تشمل فهارس مصنفة حسب الموضوع (أحوال شخصية، مدنية، تجارية، عمالية، إيجارات…).

---

## 🧩 الهدف من التقطيع (Chunking)
تحويل كل مبدأ قضائي مستقل إلى وحدة معرفية (chunk) قابلة للبحث والاسترجاع الذكي ضمن قاعدة بيانات معرفية قانونية (مثل Pinecone).

---

## ✅ المشكلة:
عند تحليل ملفات المبادئ القضائية، قد تحتوي الوثيقة الواحدة على أكثر من نوع (مدني، عمالي، تجاري...).

### أثر المشكلة:
- يصعب تصنيف البيانات في namespaces ثابتة.
- يؤدي ذلك إلى أخطاء في chunking والبحث.

---

## 🛠️ الحل المقترح: توحيد المعالجة في Namespace موحّد مع تصنيف فرعي
- جميع المبادئ تُخزن في namespace موحد:
  ```json
  "namespace": "judicial_principles"
  ```
- مع تصنيف فرعي:
  ```json
  "sub_category": "commercial" // أو civil, labor, criminal, other, unspecified
  ```

---

## 🪜 خطوات المعالجة
1. **استخراج كل مبدأ قضائي**
   - يبدأ غالبًا بصيغة: المبدأ رقم ...
   - يتبعه النص الكامل للمبدأ
   - أحيانًا يتضمن توضيحًا مختصرًا أو اجتهادًا.
2. **تحديد sub_category**
   - من رقم القضية أو عنوان المبدأ أو الفهرس.
   - إذا لم يُذكر صراحة، استخدم "unspecified".
3. **توليد metadata لكل مبدأ**

---

## 🧾 صيغة الـ chunk:
```json
{
  "type": "judicial_principle",
  "namespace": "judicial_principles",
  "sub_category": "commercial",
  "principle_number": "225",
  "title": "عدم بطلان الكمبيالة لمجرد خلوها من سبب",
  "source": "المحكمة العليا – المكتب الفني",
  "date_range": "2011-2020",
  "keywords": ["كمبيالة", "سبب الدين", "تجارة"],
  "text": "قررت المحكمة العليا أن خلو الكمبيالة من بيان السبب لا يؤدي إلى بطلانها...",
  "language": "ar"
}
```

---

## 🏷️ توجيهات فنية
- title: ملخص قصير إن وُجد أو يُستنتج من الجملة الأولى.
- date_range: الفترة الزمنية المغطاة في الملف.
- keywords: تُستخرج من المصطلحات القانونية داخل النص.
- text: يجب أن يحوي المبدأ كاملًا كما ورد.
- أضف ocr_confidence إذا كان النص مستخرجًا آليًا.

---

## 🧠 تنبيهات ذكية
- إذا لم يُذكر عنوان مخصص للمبدأ، فليكن null.
- إذا كان المبدأ غير محدد النطاق، استخدم sub_category = "unspecified".
- استخدم language: "ar" دائمًا.

---

## ✅ مثال آخر مبسط
```json
{
  "type": "judicial_principle",
  "namespace": "judicial_principles",
  "sub_category": "labor",
  "principle_number": "91",
  "title": "احتساب مكافأة نهاية الخدمة",
  "source": "المحكمة العليا – سلطنة عُمان",
  "date_range": "2011-2020",
  "keywords": ["عمال", "مكافأة", "إنهاء خدمة"],
  "text": "مبدأ المحكمة العليا: للعامل الحق في مكافأة نهاية الخدمة حتى في حالة الاستقالة...",
  "language": "ar"
}
```

---

## 🎯 الهدف النهائي
تمكين نظام البحث الذكي أو الذكاء الاصطناعي من:
- الوصول إلى مبدأ قضائي دقيق.
- تصنيفه تلقائيًا عبر sub_category.
- ربطه بالقوانين ذات الصلة.
